{"version":3,"sources":["../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/js/helpers/Globals.js","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/js/functions/PlayIcon.js","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/audio/strings-no-2.ogg","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/audio/strings-no-2.mid","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/js/P5SketchWithAudio.js","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/js/App.js","../C:/Users/PC/Documents/Animations/2024/strings-no-2/src/index.js"],"names":["window","p5","PlayIcon","_jsxs","id","className","xmlns","height","viewBox","width","children","_jsx","d","fill","P5SketchWithAudio","sketchRef","useRef","Sketch","p","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","console","log","noteSet1","tracks","notes","scheduleCueSet","noteSet2","document","getElementById","classList","add","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","arguments","length","undefined","lastTicks","currentCue","i","note","ticks","time","addCue","noiseMax","zoff","ca","cb","ox","oy","max","scaleMultiplier","setup","createCanvas","colorMode","HSB","angleMode","DEGREES","background","noFill","color","draw","isPlaying","stroke","lerpColor","abs","sin","push","translate","scale","beginShape","t","xoff","map","cos","yoff","n","noise","r","x","y","vertex","endShape","CLOSE","executeCueSet1","durationTicks","random","executeCueSet2","blendMode","SCREEN","hasStarted","mousePressed","pause","parseInt","currentTime","buffer","duration","reset","dataLayer","title","location","href","addClass","play","creditsLogged","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.dbd2361d.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/strings-no-2.c2a113fc.ogg\";","export default __webpack_public_path__ + \"static/media/strings-no-2.87c6d5dc.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport PlayIcon from './functions/PlayIcon.js';\n\nimport audio from \"../audio/strings-no-2.ogg\";\nimport midi from \"../audio/strings-no-2.mid\";\n\n/**\n * Blobs No. 2\n */\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    console.log(result);\n                    const noteSet1 = result.tracks[7].notes; // Europa - Friendly Keys\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    const noteSet2 = result.tracks[2].notes; // Subtractor - Enoch Pad\n                    p.scheduleCueSet(noteSet2, 'executeCueSet2');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        }\n\n        p.noiseMax = 1;\n\n        p.zoff = 0;\n\n        p.ca = 0;\n        \n        p.cb = 0;\n\n        p.ox = 0;\n        \n        p.oy = 0;\n\n        p.max = 0;\n\n        p.scaleMultiplier = 4;\n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.colorMode(p.HSB);\n            p.angleMode(p.DEGREES);\n            p.background(0, 0, 0);\n            p.noFill();\n            p.ca = p.color(\"#0CCBCFAA\");\n            p.cb = p.color(\"#FE68B5AA\");\n            p.ox = p.width / 2;\n            p.oy = p.height /2;\n\n            p.max = p.width > p.height ? p.width : p.height ;\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n                p.stroke(\n                    p.lerpColor(p.ca, p.cb, p.abs(p.sin(p.zoff * 100)))\n                );\n                p.push();\n                p.translate(p.ox, p.oy);\n                p.scale(1/p.scaleMultiplier);\n                p.beginShape();\n                for (let t = 0; t < 720; t++) {\n                    let xoff = p.map(p.cos(t), -1, 1, 0, p.noiseMax);\n                    let yoff = p.map(p.sin(t), -1, 1, 0, p.noiseMax);\n\n                    let n = p.noise(xoff, yoff, p.zoff);\n\n                    let r = p.map(n, 0, 1, 0, p.height * 1.5);\n                    let x = r * p.cos(t);\n                    let y = r * p.sin(t);\n                    p.vertex(x, y);\n                }\n                p.endShape(p.CLOSE);\n                p.scale(p.scaleMultiplier);\n                p.translate(-p.ox, -p.oy);\n\n                p.zoff += 0.005;\n            }\n        }\n\n        p.executeCueSet1 = (note) => {\n            const { midi, durationTicks, ticks } = note;\n            if(midi < 62 && durationTicks > 30000) {\n                console.log(note);\n                p.ca = p.color(\n                    p.random(0, 360),\n                    100,\n                    100\n                );\n\n                p.cb = p.color(\n                    p.random(0, 360),\n                    100,\n                    100\n                );\n\n                if(ticks % 122880 === 0) {\n                    p.ox = p.random(\n                        p.width / 8,\n                        p.width - p.width / 8\n                    );\n\n                    p.oy = p.random(\n                        p.height / 8,\n                        p.height - p.height / 8\n                    );\n                }\n            }\n        }\n\n        p.executeCueSet2 = (note) => {\n            const { midi, currentCue } = note;\n            if(midi < 50) {\n                p.background(0, 0, 0, 0.5);\n                p.scaleMultiplier = p.scaleMultiplier - 0.2;\n                \n                if(currentCue > 20) {\n                    p.blendMode(p.SCREEN);\n                }\n            }\n        }\n\n        p.hasStarted = false;\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                        if (typeof window.dataLayer !== typeof undefined){\n                            window.dataLayer.push(\n                                { \n                                    'event': 'play-animation',\n                                    'animation': {\n                                        'title': document.title,\n                                        'location': window.location.href,\n                                        'action': 'replaying'\n                                    }\n                                }\n                            );\n                        }\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                    if (typeof window.dataLayer !== typeof undefined && !p.hasStarted){\n                        window.dataLayer.push(\n                            { \n                                'event': 'play-animation',\n                                'animation': {\n                                    'title': document.title,\n                                    'location': window.location.href,\n                                    'action': 'start playing'\n                                }\n                            }\n                        );\n                        p.hasStarted = false\n                    }\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}